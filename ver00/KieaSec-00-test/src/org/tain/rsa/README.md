# Java RSA 암호화 하기(공개키, 개인키)



---
## 공개키 암호란?

공개키 암호는 대칭키 암호의 키 전달에 있어서 취약점을 해결하고자 탄생했습다. 공개키와 개인키라는 한 쌍의 키가 존재하며, 개인키는 특정 사람만이 가지고 있고, 공개키는 누구나 가질 수 있습니다. 공개키 암호화 방식은 암호학적으로 연관된 두 개의 키를 만들어서 하나는 자기가 안전하게 보관하고 다른 하나는 상대방에게 공개합니다.
개인키로 암호화 한 정보는 그 쌍이 되는 공개키로만 복호화가 가능하고, 공개키로 암호화한 정보는 그 쌍이 되는 개인키로만 복호화가 가능합니다.

- 공개키 : 모든 사람이 접근 가능한 키(공개)

- 개인키 : 각 사용자 자신만이 소유하는 키(비공개)

- RSA, ElGamal, ECC, 전자서명, .. 등


---
## RSA 암호화란?

RSA 암호화는 현재 SSL/TLS에 가장 많이 사용되는 공개키 암호화 알고리즘입니다. 1977년 Ron Rivest, Adi Shamir, Leonard Adleman 세 사람이 만들었으며 세 사람의 성을 따서 RSA라는 이름이 붙은 암호 방식입니다. 소인수분해 문제에 기반하여 알고리즘이 만들어졌습니다.

- 암호화 뿐만 아니라 전자서명이 가능한 최초의 알고리즘

- 큰 정수의 소인수 분해의 난해함에 기반하여, 공개키만을 가지고는 개인키를 쉽게 짐작할 수 없도록 디자인되어 있음

---
### 키 생성 과정

1. 두 소수 p,q 를 준비합니다.
2. p - 1, q - 1과 각각 서로소인 정수 e를 준비합니다.
3. ed를 (p - 1)(q - 1)으로 나눈 나머지가 1이 되도록 하는 d를 찾습니다.
4. N = pq를 계산한 후, N과 e를 공개합니다. 이들이 바로 공개키입니다. 한편 d는 숨겨두는데, 이 수가 바로 개인키입니다.
5. 이제 p, q, (p-1)(q-1)는 필요 없거니와 있어 봐야 보안에 오히려 문제를 일으킬 수 있으니, 파기합니다.

[!001](001.png)

---
## Java RSA 암복호화 사용법

### RSA 암호화에 필요한 자바 클래스

- java.security.SecureRandom : 암호화적으로 강력한 난수를 생성합니다.

- java.security.KeyPairGenerator : 공개키와 비공개키 한 쌍을 만들기 위해 사용합니다.

- java.security.PublicKey : 공개키 인터페이스입니다.

- java.security.PrivateKey : 개인키 인터페이스입니다.

- java.security.spec.PKCS8EncodedKeySpec : 개인키(private key) 스팩 클래스 입니다. 

- java.security.spec.X509EncodedKeySpec : 공개키(public key) 스팩 클래스 입니다.

- javax.crypto.Cipher : 자바에서 암호화, 복호화 기능을 제공하는 Cipher 클래스 입니다.

- java.util.Base64 : 통신 과정에서 바이너리 데이터의 손실을 막기 위해 암호화된 데이터를 Base64 인코딩하여 전달하기 위해 사용합니다. java 기본 클래스로 Apache Commons 라이브러리(org.apache.commons.codec.binary.Base64)를 이용하여도 됩니다.


[!src][RSACrypto.java]





